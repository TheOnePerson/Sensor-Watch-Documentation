<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sensor Watch: LED Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sensor Watch
   &#160;<span id="projectnumber">0.0.0</span>
   </div>
   <div id="projectbrief">A board replacement for the classic Casio F-91W wristwatch, powered by a Microchip SAM L22 microcontroller.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LED Control</div>  </div>
</div><!--header-->
<div class="contents">

<p>This section covers functions related to the bi-color red/green LED mounted behind the LCD.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad83cd70d15bdc69f8c13580f9cc16d1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#gad83cd70d15bdc69f8c13580f9cc16d1c">watch_enable_led</a> (bool pwm)</td></tr>
<tr class="memdesc:gad83cd70d15bdc69f8c13580f9cc16d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the LED.  <a href="group__led.html#gad83cd70d15bdc69f8c13580f9cc16d1c">More...</a><br /></td></tr>
<tr class="separator:gad83cd70d15bdc69f8c13580f9cc16d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bd23c1721f6db9d456de69fc8090f15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#ga6bd23c1721f6db9d456de69fc8090f15">watch_disable_led</a> (bool pwm)</td></tr>
<tr class="memdesc:ga6bd23c1721f6db9d456de69fc8090f15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the LEDs.  <a href="group__led.html#ga6bd23c1721f6db9d456de69fc8090f15">More...</a><br /></td></tr>
<tr class="separator:ga6bd23c1721f6db9d456de69fc8090f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf79cbcc09657e05c7e33f79135d90435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#gaf79cbcc09657e05c7e33f79135d90435">watch_set_led_color</a> (uint16_t red, uint16_t green)</td></tr>
<tr class="memdesc:gaf79cbcc09657e05c7e33f79135d90435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the LED to a custom color by modulating each output's duty cycle.  <a href="group__led.html#gaf79cbcc09657e05c7e33f79135d90435">More...</a><br /></td></tr>
<tr class="separator:gaf79cbcc09657e05c7e33f79135d90435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9be40a7fd1715d8df83f1c86ccfa752"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#gab9be40a7fd1715d8df83f1c86ccfa752">watch_set_led_red</a> ()</td></tr>
<tr class="memdesc:gab9be40a7fd1715d8df83f1c86ccfa752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the red LED to full brightness, and turns the green LED off.  <a href="group__led.html#gab9be40a7fd1715d8df83f1c86ccfa752">More...</a><br /></td></tr>
<tr class="separator:gab9be40a7fd1715d8df83f1c86ccfa752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad359d2ad60d5e46ecff45f87f9da82f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#gad359d2ad60d5e46ecff45f87f9da82f2">watch_set_led_green</a> ()</td></tr>
<tr class="memdesc:gad359d2ad60d5e46ecff45f87f9da82f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the green LED to full brightness, and turns the red LED off.  <a href="group__led.html#gad359d2ad60d5e46ecff45f87f9da82f2">More...</a><br /></td></tr>
<tr class="separator:gad359d2ad60d5e46ecff45f87f9da82f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9e31528c94f181001c2976231679708"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#gad9e31528c94f181001c2976231679708">watch_set_led_yellow</a> ()</td></tr>
<tr class="memdesc:gad9e31528c94f181001c2976231679708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets both red and green LEDs to full brightness.  <a href="group__led.html#gad9e31528c94f181001c2976231679708">More...</a><br /></td></tr>
<tr class="separator:gad9e31528c94f181001c2976231679708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad11f5e13becf4fbc6211583c249d6e21"><td class="memItemLeft" align="right" valign="top"><a id="gad11f5e13becf4fbc6211583c249d6e21"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__led.html#gad11f5e13becf4fbc6211583c249d6e21">watch_set_led_off</a> ()</td></tr>
<tr class="memdesc:gad11f5e13becf4fbc6211583c249d6e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns both the red and the green LEDs off. <br /></td></tr>
<tr class="separator:gad11f5e13becf4fbc6211583c249d6e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section covers functions related to the bi-color red/green LED mounted behind the LCD. </p>
<p>The SAM L22 is an exceedingly power efficient chip, whereas the LED's are relatively power- hungry. The green LED, at full power, consumes more power than the whole chip in active mode, and the red LED consumes about twelve times as much power! The LED's should thus be used only sparingly in order to preserve battery life. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Explore running the TC3 PWM driver in standby mode; this would require that the user disable it in app_prepare_for_sleep, but could allow for low power, low duty indicator LED usage. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6bd23c1721f6db9d456de69fc8090f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6bd23c1721f6db9d456de69fc8090f15">&#9670;&nbsp;</a></span>watch_disable_led()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_disable_led </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pwm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables the LEDs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwm</td><td>if true, disables the PWM output. If false, disables the digital outputs. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad83cd70d15bdc69f8c13580f9cc16d1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad83cd70d15bdc69f8c13580f9cc16d1c">&#9670;&nbsp;</a></span>watch_enable_led()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_enable_led </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pwm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables the LED. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwm</td><td>if true, enables PWM output for brightness control (required to use <a class="el" href="group__led.html#gaf79cbcc09657e05c7e33f79135d90435">watch_set_led_color</a>). If false, configures the LED pins as digital outputs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The TC driver required for PWM mode does not run in STANDBY mode. You should keep your app awake while PWM'ing the LED's, and disable them before going to sleep. </dd></dl>

</div>
</div>
<a id="gaf79cbcc09657e05c7e33f79135d90435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf79cbcc09657e05c7e33f79135d90435">&#9670;&nbsp;</a></span>watch_set_led_color()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_set_led_color </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>red</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>green</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the LED to a custom color by modulating each output's duty cycle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">red</td><td>The red value. </td></tr>
    <tr><td class="paramname">green</td><td>The green value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>still working on this, 0-65535 works now but these values may change. </dd></dl>

</div>
</div>
<a id="gad359d2ad60d5e46ecff45f87f9da82f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad359d2ad60d5e46ecff45f87f9da82f2">&#9670;&nbsp;</a></span>watch_set_led_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_set_led_green </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the green LED to full brightness, and turns the red LED off. </p>
<dl class="section note"><dt>Note</dt><dd>Of the two LED's in the RG bi-color LED, the green LED is the more power-efficient one (~0.44 mA). </dd></dl>

</div>
</div>
<a id="gab9be40a7fd1715d8df83f1c86ccfa752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9be40a7fd1715d8df83f1c86ccfa752">&#9670;&nbsp;</a></span>watch_set_led_red()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_set_led_red </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the red LED to full brightness, and turns the green LED off. </p>
<dl class="section note"><dt>Note</dt><dd>Of the two LED's in the RG bi-color LED, the red LED is the less power-efficient one (~4.5 mA). </dd></dl>

</div>
</div>
<a id="gad9e31528c94f181001c2976231679708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad9e31528c94f181001c2976231679708">&#9670;&nbsp;</a></span>watch_set_led_yellow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watch_set_led_yellow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets both red and green LEDs to full brightness. </p>
<dl class="section note"><dt>Note</dt><dd>The total current draw between the two LED's in this mode will be ~5 mA, which is more than the watch draws in any other mode. Take care not to drain the battery. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
